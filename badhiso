-- üìú ÂÆåÂÖ®ÁâàÔºö„Çπ„Ç≥„Ç¢„Éú„Éº„ÉâUI with „Éê„Ç¶„É≥„ÉÜ„Ç£/Honor Ë°®Á§∫„ÄÅÊäò„Çä„Åü„Åü„Åø„Éª„É™„Çª„ÉÉ„Éà„ÉªTPÊ©üËÉΩ‰ªò„ÅçÔºàU„Ç≠„Éº„ÅßTPËß£Èô§Ôºâ

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- üîß UI‰ΩúÊàê
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BountyScoreboardUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 400)
mainFrame.Position = UDim2.new(1, -320, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
mainFrame.BackgroundTransparency = 0.3
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Ëá™ÂàÜ„ÅÆ„Éê„Ç¶„É≥„ÉÜ„Ç£Ë°®Á§∫Ôºà‰∏äÈÉ®„Å´ÈÖçÁΩÆÔºâ
local bountyLabel = Instance.new("TextLabel")
bountyLabel.Size = UDim2.new(1, -100, 0, 30)
bountyLabel.Position = UDim2.new(0, 10, 0, 5)
bountyLabel.BackgroundTransparency = 1
bountyLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
bountyLabel.TextScaled = true
bountyLabel.Font = Enum.Font.SourceSansBold
bountyLabel.TextXAlignment = Enum.TextXAlignment.Left
bountyLabel.Text = "Bounty: 0"
bountyLabel.ZIndex = 2
bountyLabel.Parent = mainFrame

-- Êäò„Çä„Åü„Åü„Åø„Éú„Çø„É≥
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 30, 0, 30)
toggleButton.Position = UDim2.new(1, -35, 0, 5)
toggleButton.AnchorPoint = Vector2.new(1, 0)
toggleButton.Text = "‚ñ≤"
toggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.ZIndex = 3
toggleButton.Parent = mainFrame

-- UIÂâäÈô§„Éú„Çø„É≥
local deleteButton = Instance.new("TextButton")
deleteButton.Size = UDim2.new(0, 30, 0, 30)
deleteButton.Position = UDim2.new(1, -70, 0, 5)
deleteButton.AnchorPoint = Vector2.new(1, 0)
deleteButton.Text = "√ó"
deleteButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
deleteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
deleteButton.TextScaled = true
deleteButton.ZIndex = 3
deleteButton.Parent = mainFrame

-- „Éò„ÉÉ„ÉÄ„Éº
local header = Instance.new("TextLabel")
header.Size = UDim2.new(1, 0, 0, 40)
header.Position = UDim2.new(0, 0, 0, 40)
header.BackgroundTransparency = 1
header.Text = "ÂêçÂâç„ÉªID\t\tBounty/Honor"
header.TextColor3 = Color3.fromRGB(255, 255, 255)
header.TextSize = 18
header.Font = Enum.Font.SourceSansBold
header.TextXAlignment = Enum.TextXAlignment.Left
header.Parent = mainFrame

-- „Éó„É¨„Ç§„É§„Éº„É™„Çπ„Éà
local playerList = Instance.new("ScrollingFrame")
playerList.Size = UDim2.new(1, -20, 1, -160)
playerList.Position = UDim2.new(0, 10, 0, 80)
playerList.CanvasSize = UDim2.new(0, 0, 0, 0)
playerList.ScrollBarThickness = 6
playerList.BackgroundTransparency = 1
playerList.AutomaticCanvasSize = Enum.AutomaticSize.Y
playerList.Parent = mainFrame

local listLayout = Instance.new("UIListLayout")
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.VerticalAlignment = Enum.VerticalAlignment.Top
listLayout.Parent = playerList

-- ÈÅ∏Êäû‰∏≠„É©„Éô„É´
local selectedLabel = Instance.new("TextLabel")
selectedLabel.Size = UDim2.new(1, -20, 0, 30)
selectedLabel.Position = UDim2.new(0, 10, 1, -90)
selectedLabel.BackgroundTransparency = 1
selectedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
selectedLabel.Text = "ÈÅ∏Êäû‰∏≠: „Å™„Åó"
selectedLabel.TextScaled = true
selectedLabel.Parent = mainFrame

-- Êõ¥Êñ∞„Éú„Çø„É≥
local refreshButton = Instance.new("TextButton")
refreshButton.Size = UDim2.new(0.5, -5, 0, 40)
refreshButton.Position = UDim2.new(0, 10, 1, -50)
refreshButton.Text = "üîÑ Êõ¥Êñ∞"
refreshButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
refreshButton.TextColor3 = Color3.fromRGB(255, 255, 255)
refreshButton.Parent = mainFrame

-- „É™„Çª„ÉÉ„Éà„Éú„Çø„É≥
local resetButton = Instance.new("TextButton")
resetButton.Size = UDim2.new(0.5, -5, 0, 40)
resetButton.Position = UDim2.new(0.5, 5, 1, -50)
resetButton.Text = "‚ùå „É™„Çª„ÉÉ„Éà"
resetButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
resetButton.TextColor3 = Color3.fromRGB(255, 255, 255)
resetButton.Parent = mainFrame

local targetPlayer = nil
local teleportEnabled = false
local teleportDistance = 10
local offsetY = 1
local uiOpen = true

local function formatMillion(value)
	if value >= 1_000_000 then
		return string.format("%.1fm", value / 1_000_000)
	else
		return string.format("%d", value)
	end
end

-- „Éó„É¨„Ç§„É§„Éº‰∏ÄË¶ßÊõ¥Êñ∞
local function refreshPlayerList()
	for _, child in pairs(playerList:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end

	local navy = {}
	local pirate = {}
	local others = {}

	for _, p in ipairs(Players:GetPlayers()) do
		if p == LocalPlayer then continue end
		local team = p.Team
		local teamName = team and team.Name or ""
		local bounty = 0
		local ls = p:FindFirstChild("leaderstats")
		if ls and ls:FindFirstChild("Bounty/Honor") then
			bounty = ls["Bounty/Honor"].Value
		end

		local info = {
			player = p,
			name = p.DisplayName,
			id = p.Name:match("^[^@]+") or p.Name,
			bounty = bounty,
			team = team
		}

		if teamName == "Êµ∑Ëªç" then
			table.insert(navy, info)
		elseif teamName == "Êµ∑Ë≥ä" then
			table.insert(pirate, info)
		else
			table.insert(others, info)
		end
	end

	table.sort(navy, function(a, b) return a.bounty > b.bounty end)
	table.sort(pirate, function(a, b) return a.bounty > b.bounty end)
	table.sort(others, function(a, b) return a.bounty > b.bounty end)

	local function createButton(info)
		local button = Instance.new("TextButton")
		button.Size = UDim2.new(1, 0, 0, 30)
		button.Text = string.format("%s (%s)\t\t%s", info.name, info.id, formatMillion(info.bounty))
		button.TextColor3 = Color3.fromRGB(255, 255, 255)
		button.BackgroundTransparency = 0.4
		button.BackgroundColor3 = info.team and info.team.TeamColor.Color or Color3.fromRGB(30, 30, 30)
		button.Parent = playerList

		button.MouseButton1Click:Connect(function()
			if info.player == LocalPlayer then return end
			targetPlayer = info.player
			selectedLabel.Text = "ÈÅ∏Êäû‰∏≠: " .. info.name .. "Ôºà" .. info.id .. "Ôºâ"
		end)
	end

	for _, info in ipairs(navy) do createButton(info) end
	for _, info in ipairs(pirate) do createButton(info) end
	for _, info in ipairs(others) do createButton(info) end

	playerList.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y)
end

-- Ëá™ÂàÜ„ÅÆ„Éê„Ç¶„É≥„ÉÜ„Ç£Ë°®Á§∫Êõ¥Êñ∞
local function updateOwnBounty()
	local ls = LocalPlayer:FindFirstChild("leaderstats")
	if ls and ls:FindFirstChild("Bounty/Honor") then
		bountyLabel.Text = "Bounty: " .. tostring(ls["Bounty/Honor"].Value)
	else
		bountyLabel.Text = "Bounty: ?"
	end
end

-- „ÉÜ„É¨„Éù„Éº„ÉàÊ©üËÉΩ
local function teleportToSelf()
	if teleportEnabled and targetPlayer then
		local rootPart = targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart")
		local playerRoot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
		if rootPart and playerRoot then
			local forward = playerRoot.CFrame.LookVector
			local pos = playerRoot.Position + forward * teleportDistance + Vector3.new(0, offsetY, 0)
			rootPart.CFrame = CFrame.new(pos)
		end
	end
end

-- UIË°®Á§∫ÂàáÊõø
local function updateUIVisibility()
	local show = uiOpen
	playerList.Visible = show
	refreshButton.Visible = show
	resetButton.Visible = show
	selectedLabel.Visible = show
	deleteButton.Visible = show
	bountyLabel.Visible = show

	if show then
		toggleButton.Text = "‚ñ≤"
		mainFrame.Size = UDim2.new(0, 300, 0, 400)
	else
		toggleButton.Text = "‚ñº"
		mainFrame.Size = UDim2.new(0, 300, 0, 40)
	end
end

RunService.Heartbeat:Connect(function()
	teleportToSelf()
	updateOwnBounty()
end)

toggleButton.MouseButton1Click:Connect(function()
	uiOpen = not uiOpen
	updateUIVisibility()
end)

deleteButton.MouseButton1Click:Connect(function()
	screenGui:Destroy()
end)

refreshButton.MouseButton1Click:Connect(refreshPlayerList)

resetButton.MouseButton1Click:Connect(function()
	targetPlayer = nil
	selectedLabel.Text = "ÈÅ∏Êäû‰∏≠: „Å™„Åó"
end)

Players.PlayerAdded:Connect(refreshPlayerList)
Players.PlayerRemoving:Connect(refreshPlayerList)

local mouse = LocalPlayer:GetMouse()
mouse.Button2Down:Connect(function()
	teleportEnabled = true
end)

mouse.Button2Up:Connect(function()
	teleportEnabled = false
end)

UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	if input.KeyCode == Enum.KeyCode.U then
		teleportEnabled = false
	end
end)

refreshPlayerList()
updateUIVisibility()
updateOwnBounty()

